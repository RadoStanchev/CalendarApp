@{
    ViewData["Title"] = "Live Chat";
}

<div class="messenger-layout">
    <aside class="messenger-sidebar">
        <div class="messenger-sidebar__header">
            <h2 class="messenger-sidebar__title">Разговори</h2>
            <button class="messenger-sidebar__new" type="button" aria-label="Нов чат">
                <span aria-hidden="true">+</span>
            </button>
        </div>
        <div class="messenger-sidebar__search">
            <input id="chatSearch" class="messenger-input" type="search" placeholder="Търсене на приятели" />
        </div>
        <div class="messenger-sidebar__section">
            <h3 class="messenger-sidebar__subtitle">Активни приятели</h3>
            <div class="messenger-thread-list" id="chatThreads">
                <button class="messenger-thread" type="button" data-contact="Мария Иванова" data-status="Онлайн" data-avatar="MI" data-accent="accent-blue" data-last-message="Ще се видим в 18:00?">
                    <span class="messenger-avatar accent-blue">MI</span>
                    <span class="messenger-thread__content">
                        <span class="messenger-thread__name">Мария Иванова</span>
                        <span class="messenger-thread__preview">Ще се видим в 18:00?</span>
                    </span>
                    <span class="messenger-thread__meta">2m</span>
                </button>
                <button class="messenger-thread" type="button" data-contact="Иван Петров" data-status="Последно онлайн преди 5 минути" data-avatar="IP" data-accent="accent-purple" data-last-message="Изпратих ти файла.">
                    <span class="messenger-avatar accent-purple">IP</span>
                    <span class="messenger-thread__content">
                        <span class="messenger-thread__name">Иван Петров</span>
                        <span class="messenger-thread__preview">Изпратих ти файла.</span>
                    </span>
                    <span class="messenger-thread__meta">12m</span>
                </button>
                <button class="messenger-thread" type="button" data-contact="Support Bot" data-status="Отговаря обикновено до няколко секунди" data-avatar="SB" data-accent="accent-green" data-last-message="Как мога да помогна?">
                    <span class="messenger-avatar accent-green">SB</span>
                    <span class="messenger-thread__content">
                        <span class="messenger-thread__name">Support Bot</span>
                        <span class="messenger-thread__preview">Как мога да помогна?</span>
                    </span>
                    <span class="messenger-thread__meta">1h</span>
                </button>
            </div>
        </div>
        <div class="messenger-sidebar__section">
            <h3 class="messenger-sidebar__subtitle">Скорошни разговори</h3>
            <div class="messenger-thread-list messenger-thread-list--compact">
                <button class="messenger-thread messenger-thread--compact" type="button" data-contact="Анелия Георгиева" data-status="Последно онлайн вчера" data-avatar="АГ" data-accent="accent-orange" data-last-message="Благодаря!">
                    <span class="messenger-avatar accent-orange">АГ</span>
                    <span class="messenger-thread__content">
                        <span class="messenger-thread__name">Анелия Георгиева</span>
                        <span class="messenger-thread__preview">Благодаря!</span>
                    </span>
                    <span class="messenger-thread__meta">Вчера</span>
                </button>
                <button class="messenger-thread messenger-thread--compact" type="button" data-contact="Николай Стоянов" data-status="Последно онлайн преди 3 дни" data-avatar="НС" data-accent="accent-teal" data-last-message="Ще потвърдя до края на деня.">
                    <span class="messenger-avatar accent-teal">НС</span>
                    <span class="messenger-thread__content">
                        <span class="messenger-thread__name">Николай Стоянов</span>
                        <span class="messenger-thread__preview">Ще потвърдя до края на деня.</span>
                    </span>
                    <span class="messenger-thread__meta">3 дни</span>
                </button>
            </div>
        </div>
    </aside>
    <section class="messenger-content">
        <header class="messenger-header">
            <div class="messenger-contact" aria-live="polite">
                <span id="activeContactAvatar" class="messenger-avatar accent-blue">MI</span>
                <span class="messenger-contact__meta">
                    <span id="activeContactName" class="messenger-contact__name">Мария Иванова</span>
                    <span id="activeContactStatus" class="messenger-contact__status">Онлайн</span>
                </span>
            </div>
            <div class="messenger-self">
                <label class="messenger-label" for="userInput">Вашето име</label>
                <input id="userInput" class="messenger-input" placeholder="Представете се" />
            </div>
        </header>
        <div id="chatMessages" class="messenger-messages" data-empty="true">
            <div class="messenger-empty-state">
                <h3 class="messenger-empty-state__title">Изберете приятел или започнете нов разговор</h3>
                <p class="messenger-empty-state__text">Съобщенията се появяват тук, щом някой напише нещо. Всички са поканени в общата стая.</p>
            </div>
        </div>
        <form id="chatForm" class="messenger-form" autocomplete="off">
            <div class="messenger-form__composer">
                <textarea id="messageInput" class="messenger-input messenger-input--multiline" rows="1" placeholder="Напишете съобщение..." required></textarea>
            </div>
            <div class="messenger-form__actions">
                <button id="sendButton" type="submit" class="messenger-button" disabled>Изпрати</button>
            </div>
        </form>
    </section>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/@@microsoft/signalr@9.0.0/dist/browser/signalr.min.js" crossorigin="anonymous"></script>
    <script src="~/js/chat.js" asp-append-version="true"></script>
}
